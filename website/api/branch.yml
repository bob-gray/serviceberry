name: Branch
type: class
description: Created by calling `at` method on the service trunk or any service branch.
methods:
- name: use
  returns: this branch
  description: Adds a handler to this branch.
  arguments:
  - name: handler
    type: function or object

- name: catch
  returns: this branch
  description: Adds an error handler to this branch.
  arguments:
  - name: handler
    type: function or object

- name: at
  returns: new branch
  description: |
    Routes requests at a path (segment) down a new branch. Path paramaters are delimited using a set of curly braces.
    Such as `foo/baz/{id}/`. The branch will parse the path parameters. They are available to all handlers on
    the request object.
  arguments:
  - name: path
    type: string

- name: on
  returns: new leaf
  description: Routes requests filtered by options to a new leaf.
  arguments:
  - name: options
    type: object
    properties:
      - name: method
        type: string or array
        description: HTTP method(s) to handle (GET, POST...). If not specified all methods are handled.
        required: false
      - name: consumes
        type: string or array
        description: Request content type(s) to handle (application/json, text/xml...). If not specified all request content types are handled.
        required: false
      - name: produces
        type: string or array
        description: Response content type(s) to handle (application/json, text/xml...). If not specified all response content types are handled.
        required: false
  - name: handler
    type: function or object
    required: false

- name: on
  returns: new leaf
  description: Routes requests filtered by method to a new leaf.
  arguments:
  - name: method
    type: string or array
    description: |
      HTTP method(s) to handle (GET, POST...). If "*" all methods are handled.
  - name: handler
    type: function or object
    required: false